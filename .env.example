# ─────────────────────────────────────────────────────────────────────
# Monkeys IAM — Environment Configuration
# Copy this file to .env and fill in the values.
# Variables marked REQUIRED will cause the app to panic if unset.
# ─────────────────────────────────────────────────────────────────────

# Server Configuration
PORT=8080
ENVIRONMENT=development          # development | production

# Static CORS origins (optional).
# Per-org origins are managed dynamically via the API and stored in the DB,
# so this is only needed for origins that should ALWAYS be allowed regardless
# of organization (e.g. your admin dashboard).
# Set to * for local dev; leave empty or list specific URLs in production.
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:5174,http://localhost:8080,http://localhost:8085

# Database Configuration
POSTGRES_USER=postgres
POSTGRES_PASSWORD=<CHANGE_ME>    # Used by docker-compose for the Postgres container
POSTGRES_DB=monkeys_iam
DATABASE_URL=postgres://postgres:<CHANGE_ME>@localhost:5435/monkeys_iam?sslmode=disable   # REQUIRED
REDIS_URL=redis://localhost:6385                                                           # REQUIRED

# JWT Configuration (REQUIRED — app will NOT start without these)
JWT_SECRET=<GENERATE_A_RANDOM_SECRET>       # REQUIRED — use: openssl rand -hex 32
JWT_EXPIRATION=24h
JWT_PRIVATE_KEY_FILE=jwt_private_key.pem    # Path to RSA private key (PEM format)

# OIDC / Federation
OIDC_ISSUER=http://localhost:8085
COOKIE_DOMAIN=localhost

# Logging
LOG_LEVEL=info

# Security
RATE_LIMIT_ENABLED=true
RATE_LIMIT_RPS=100

# Email / SMTP Configuration
# ─────────────────────────────────────────────────────────────────────
# For local development with Mailpit (no auth):
#   SMTP_HOST=mailpit
#   SMTP_PORT=1025
#   SMTP_USERNAME=
#   SMTP_PASSWORD=
#
# For Gmail (use App Password, not your real password):
#   SMTP_HOST=smtp.gmail.com
#   SMTP_PORT=587
#   SMTP_USERNAME=your-email@gmail.com
#   SMTP_PASSWORD=xxxx-xxxx-xxxx-xxxx
#
# For AWS SES:
#   SMTP_HOST=email-smtp.us-east-1.amazonaws.com
#   SMTP_PORT=587
#   SMTP_USERNAME=<SES SMTP username>
#   SMTP_PASSWORD=<SES SMTP password>
# ─────────────────────────────────────────────────────────────────────
SMTP_HOST=mailpit
SMTP_PORT=1025
SMTP_FROM=no-reply@monkeys.com
SMTP_USERNAME=
SMTP_PASSWORD=

# Frontend URL (used in verification/reset email links)
FRONTEND_URL=http://localhost:5173

# Frontend (Vite)
VITE_API_URL=http://localhost:8085/api/v1
VITE_PROXY_TARGET=http://localhost:8080

# pgAdmin (optional — used with `docker compose --profile tools up`)
PGADMIN_DEFAULT_EMAIL=admin@monkeys.com
PGADMIN_DEFAULT_PASSWORD=<CHANGE_ME>
